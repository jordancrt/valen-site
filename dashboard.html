<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ValenHub – Tableau de bord</title>
  <meta name="theme-color" content="#0B1120" />
  <link rel="stylesheet" href="assets/style.css?v=4001" />
</head>
<body>
  <!-- NAV -->
  <header class="navbar">
    <div class="container nav-container">
      <div class="nav-brand">
        <img src="assets/icon-192.png" alt="Logo ValenHub" />
        <span>VALENHUB</span>
      </div>
      <nav>
        <ul class="nav-links">
          <li><a href="index.html">Accueil</a></li>
          <li><a class="active" href="dashboard.html">Tableau de bord</a></li>
          <li><a href="about.html">À propos</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- CONTENU -->
  <main class="page">
    <div class="container">
      <div class="container" style="margin:16px 0 24px">
  <button class="btn btn-primary" id="btn-add-account">Ajouter un compte</button>
</div>

<div class="modal" id="add-account-modal" hidden>
  <div class="modal-box">
    <h3>Ajouter un compte</h3>
    <p style="margin-top:8px">Choisis une méthode :</p>

    <div class="row" style="display:flex; gap:12px; flex-wrap:wrap; margin:12px 0">
      <button class="btn" id="btn-link-oauth">Connexion sécurisée (banque)</button>
      <label class="btn">
        Import CSV/OFX
        <input type="file" id="file-import" accept=".csv,.ofx,.qif" hidden />
      </label>
      <button class="btn btn-secondary" id="btn-add-manual">Ajouter manuellement</button>
    </div>

    <div id="manual-form" hidden style="margin-top:12px">
      <div class="row" style="display:grid; grid-template-columns:1fr 1fr; gap:12px">
        <input id="manual-name" placeholder="Nom du compte (ex: Livret A)" />
        <select id="manual-type">
          <option>Épargne</option><option>Courant</option><option>Investissement</option><option>Crypto</option><option>Autre</option>
        </select>
        <input id="manual-currency" placeholder="Devise (ex: EUR)" value="EUR" />
        <input id="manual-balance" placeholder="Solde (ex: 1500.00)" />
      </div>
      <button class="btn" id="manual-save" style="margin-top:12px">Enregistrer</button>
    </div>

    <div class="row" style="display:flex; justify-content:flex-end; gap:8px; margin-top:16px">
      <button class="btn" data-close>Fermer</button>
    </div>
  </div>
</div>
      <!-- KPIs -->
      <section class="kpis-grid">
        <div class="card kpi">
          <h3>Patrimoine total</h3>
          <p class="big" id="kpi-wealth">—</p>
          <p class="muted small">Tous comptes & actifs confondus</p>
        </div>
        <div class="card kpi">
          <h3>Variation mensuelle</h3>
          <p class="big" id="kpi-change">—</p>
          <p class="muted small">Évolution sur 30 jours</p>
        </div>
        <div class="card kpi">
          <h3>Dépenses du mois</h3>
          <p class="big" id="kpi-expenses">—</p>
          <p class="muted small">Mise à jour locale</p>
        </div>
        <div class="card kpi">
          <h3>Objectif atteint</h3>
          <p class="big" id="kpi-goal">—</p>
          <p class="muted small">Progrès vers la cible</p>
        </div>
      </section>

      <!-- Graphiques -->
      <section class="card reveal">
        <h3>Évolution du patrimoine</h3>
        <div class="skeleton" style="height:260px"></div>
        <canvas id="chartWealth" hidden></canvas>
      </section>

      <section class="card reveal">
        <h3>Dépenses par catégorie</h3>
        <div class="skeleton" style="height:260px"></div>
        <canvas id="chartExpenses" hidden></canvas>
      </section>

      <section class="card reveal">
        <h3>Répartition du portefeuille</h3>
        <div class="skeleton" style="height:180px"></div>
        <canvas id="chartAllocation" hidden></canvas>
      </section>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="footer">
    <p>© 2025 ValenHub — Clarté & Sérénité financière.</p>
  </footer>

  <!-- Librairies + App -->
  <!-- Chart.js CDN (pour les graphiques) -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Notre wrapper -->
<script type="module" src="assets/api-wrapper.js"></script>

<!-- Le code du dashboard qui consomme le wrapper -->
<script type="module" src="assets/dashboard.js"></script>
</body>
</html>
