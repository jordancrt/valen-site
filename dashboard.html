<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ValenHub — Tableau de bord</title>
  <link rel="stylesheet" href="assets/styles.css">
</head>

<body>
  <!-- NAVBAR -->
  <header class="navbar">
    <div class="container nav-container">
      <a class="nav-brand" href="index.html">
        <img src="assets/icon-192.png" alt="Logo ValenHub"
             style="width:32px;height:32px;margin-right:8px;vertical-align:middle;filter:drop-shadow(0 0 6px rgba(139,92,246,.6));">
        <span>VALENHUB</span>
      </a>

      <ul class="nav-links">
        <li><a href="index.html">Accueil</a></li>
        <li><a href="comparateur.html">Comparateur</a></li>
        <li><a class="active" href="dashboard.html">Tableau de bord</a></li>
        <li><a href="profil.html">Profil</a></li>
      </ul>

      <button id="navToggle" class="nav-toggle" aria-label="Menu">☰</button>
    </div>
  </header>

  <!-- Drawer mobile -->
  <div id="navDrawer" class="nav-drawer">
    <a href="index.html">Accueil</a>
    <a href="comparateur.html">Comparateur</a>
    <a class="active" href="dashboard.html">Tableau de bord</a>
    <a href="profil.html">Profil</a>
  </div>
  <div id="navBackdrop" class="nav-backdrop"></div>

  <!-- CONTENU PRINCIPAL -->
  <main class="container dash-shell">
    <!-- En-tête -->
    <section class="dash-header">
      <div>
        <h1>Ton cockpit financier.</h1>
        <p class="muted">
          Vue d’ensemble de ton patrimoine, de tes comptes et de ton budget,
          avec des données stockées uniquement dans ton navigateur.
        </p>
      </div>
      <div class="badge-box">
        <span class="badge">Bêta ValenHub</span>
        <p class="muted small">
          Ajoute quelques comptes pour voir les graphiques se mettre à jour en temps réel.
        </p>
      </div>
    </section>

    <!-- Cartes de stats -->
    <section class="stats-grid">
      <article class="card stat-card">
        <p class="stat-label">Patrimoine total</p>
        <p id="statTotal" class="stat-value">0 €</p>
        <p class="stat-hint muted xsmall">Somme de tous tes comptes</p>
      </article>

      <article class="card stat-card">
        <p class="stat-label">Liquidités</p>
        <p id="statCash" class="stat-value">0 €</p>
        <p class="stat-hint muted xsmall">Comptes courants & livrets</p>
      </article>

      <article class="card stat-card">
        <p class="stat-label">Investissements</p>
        <p id="statInvest" class="stat-value">0 €</p>
        <p class="stat-hint muted xsmall">PEA, CTO, crypto, etc.</p>
      </article>

      <article class="card stat-card">
        <p class="stat-label">Dettes</p>
        <p id="statDebt" class="stat-value">0 €</p>
        <p class="stat-hint muted xsmall">Crédit conso, immo, etc.</p>
      </article>
    </section>

    <!-- Zone graphiques -->
    <section class="charts-grid">
      <article class="card chart-card">
        <div class="card-head">
          <h2>Évolution du patrimoine</h2>
          <span class="muted xsmall" id="evoHint">6 derniers mois</span>
        </div>
        <div class="chart-box">
          <canvas id="evolutionChart"></canvas>
        </div>
      </article>

      <article class="card chart-card">
        <div class="card-head">
          <h2>Répartition par type d’actifs</h2>
          <span class="muted xsmall" id="allocHint">Banque, investissements, crypto…</span>
        </div>
        <div class="chart-box">
          <canvas id="allocationChart"></canvas>
        </div>
      </article>
    </section>

    <!-- Comptes + budget -->
    <section class="bottom-grid">
      <!-- Comptes -->
      <article class="card">
        <div class="card-head">
          <h2>Mes comptes</h2>
          <button id="addAccountBtn" class="btn btn-primary btn-small">
            Ajouter un compte
          </button>
        </div>

        <table class="accounts-table">
          <thead>
            <tr>
              <th>Nom</th>
              <th>Type</th>
              <th>Catégorie</th>
              <th>Solde (€)</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="accountsTableBody">
            <!-- rempli par JS -->
          </tbody>
        </table>

        <p class="muted xsmall" style="margin-top:8px">
          Tu peux mélanger comptes bancaires, PEA, crypto, livrets, etc.
          Tout est regroupé par catégorie pour les graphiques.
        </p>
      </article>

      <!-- Budget + résumé -->
      <article class="card">
        <div class="card-head">
          <h2>Budget du mois</h2>
          <span id="budgetStatus" class="badge">Mode simple</span>
        </div>

        <table class="budget-table">
          <thead>
            <tr>
              <th>Catégorie</th>
              <th>Budget (€)</th>
              <th>Dépensé (€)</th>
            </tr>
          </thead>
          <tbody id="budgetTableBody">
            <!-- rempli par JS -->
          </tbody>
        </table>

        <div class="budget-summary">
          <div>
            <p class="kpi-label">Budget total</p>
            <p id="budgetTotal" class="kpi-value">0 €</p>
          </div>
          <div>
            <p class="kpi-label">Dépensé</p>
            <p id="budgetSpent" class="kpi-value">0 €</p>
          </div>
          <div>
            <p class="kpi-label">Reste</p>
            <p id="budgetLeft" class="kpi-value">0 €</p>
          </div>
        </div>

        <h3 style="margin-top:18px;">Résumé rapide</h3>
        <p class="muted small" id="summaryText">
          Ajoute quelques comptes et ajuste ton budget pour suivre ta trajectoire mois après mois.
        </p>
        <ul class="summary-list muted small">
          <li>• Données stockées uniquement dans ton navigateur (localStorage).</li>
          <li>• Tu peux ajouter / supprimer des comptes à tout moment.</li>
          <li>• Les graphiques se mettent à jour dès que tu modifies un compte.</li>
        </ul>
      </article>
    </section>
  </main>

  <!-- MODALE AJOUT COMPTE -->
  <div id="accountModal" class="modal hidden">
    <div class="modal-box">
      <h3>Ajouter un compte</h3>
      <p class="muted small">
        Un compte peut être un compte courant, un PEA, un portefeuille crypto, un livret, etc.
      </p>

      <div class="modal-field">
        <label for="accName">Nom du compte</label>
        <input id="accName" type="text" placeholder="Ex : Revolut, PEA Trade Republic…">
      </div>

      <div class="modal-grid">
        <div class="modal-field">
          <label for="accType">Type</label>
          <select id="accType">
            <option value="banque">Banque</option>
            <option value="invest">Investissement</option>
            <option value="crypto">Crypto</option>
            <option value="epargne">Épargne</option>
            <option value="dette">Dette</option>
            <option value="autre">Autre</option>
          </select>
        </div>
        <div class="modal-field">
          <label for="accBalance">Solde (€)</label>
          <input id="accBalance" type="number" step="0.01" placeholder="0">
        </div>
      </div>

      <div class="modal-actions">
        <button id="cancelModal" class="btn">Annuler</button>
        <button id="confirmModal" class="btn btn-primary">Ajouter</button>
      </div>
    </div>
  </div>

  <div id="modalBackdrop" class="modal-backdrop hidden"></div>

  <!-- SCRIPTS -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="assets/dashboard.js"></script>
</body>
</html>
