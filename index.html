<!-- SCRIPTS -->
<script>
  // Nettoyage (une seule fois)
  (async () => {
    try {
      if (!localStorage.getItem('vhCleaned')) {
        if ('serviceWorker' in navigator) {
          const regs = await navigator.serviceWorker.getRegistrations();
          for (const reg of regs) await reg.unregister();
        }
        if (window.caches && caches.keys) {
          const keys = await caches.keys();
          await Promise.all(keys.map(k => caches.delete(k)));
        }
        localStorage.setItem('vhCleaned', '1');
        console.log('ðŸ§¹ Cache nettoyÃ© une fois.');
      }
    } catch (e) {
      console.warn('Erreur nettoyage cache :', e);
    }
  })();

  // Enregistrement normal du SW (si prÃ©sent)
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/sw.js').catch(console.error);
    });
  }
</script>
