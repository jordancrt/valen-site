<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Espace personnel — ValenHub</title>
  <link rel="stylesheet" href="assets/style.css?v=1020" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
</head>

<body class="dashboard">
  <header class="navbar">
    <div class="container nav-container">
      <a href="index.html" class="nav-brand">
        <img src="https://cdn-icons-png.flaticon.com/512/6479/6479379.png" alt="logo">
        <span>VALENHUB</span>
      </a>
      <nav>
        <ul class="nav-links">
          <li><a href="index.html">Accueil</a></li>
          <li><a href="espace.html" class="active">Espace</a></li>
          <li><a href="dashboard.html">Tableau de bord</a></li>
          <li><a href="comparateur.html">Comparateur</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container">
    <h1 style="margin-top:36px;">Tableau de bord personnel</h1>

    <!-- === Actions === -->
    <div class="card">
      <h3>Comptes & actions</h3>
      <div class="btn-group" style="margin-top:10px;">
        <button class="btn btn-ghost" data-action="refresh">Rafraîchir</button>
        <button class="btn btn-ghost" data-action="demo">Démo locale</button>
        <button class="btn btn-ghost" data-action="reset">Réinitialiser</button>
        <button id="addAccountBtn" class="btn btn-primary">Ajouter un compte</button>
      </div>
      <p class="muted" style="margin-top:10px;">
        Connexion future : banques / crypto / trading via clé publique chiffrée (sans identifiants).
      </p>

      <!-- Tableau des comptes -->
      <table id="accountsTable" style="width:100%; margin-top:14px; border-collapse:collapse;">
        <thead>
          <tr>
            <th style="text-align:left;">Nom</th>
            <th style="text-align:left;">Type</th>
            <th style="text-align:left;">Solde</th>
            <th></th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <!-- === Indicateurs === -->
    <div class="kpis-grid">
      <div class="card kpi">
        <h3>Patrimoine total</h3>
        <p class="big" id="totalWealth">0 €</p>
        <p class="muted small">Tous comptes & actifs confondus</p>
      </div>
      <div class="card kpi">
        <h3>Variation mensuelle</h3>
        <p class="big" id="monthVariation">0 %</p>
        <p class="muted small">Depuis le début du mois</p>
      </div>
      <div class="card kpi">
        <h3>Dépenses du mois</h3>
        <p class="big" id="expensesMonth">0 €</p>
        <p class="muted small">Toutes catégories</p>
      </div>
      <div class="card kpi">
        <h3>Objectif atteint</h3>
        <p class="big" id="goalProgress">0 %</p>
        <p class="muted small">Progrès vers la cible</p>
      </div>
    </div>

    <!-- === Graphique principal === -->
    <div class="card" style="min-height:340px;">
      <div class="card-header" style="display:flex;justify-content:space-between;align-items:center;">
        <h3>Évolution du patrimoine</h3>
        <select id="period" class="select">
          <option value="1m">1 mois</option>
          <option value="6m">6 mois</option>
          <option value="1y" selected>1 an</option>
        </select>
      </div>
      <canvas id="chartWealth"></canvas>
    </div>
  </main>

  <!-- === Fenêtre modale ajout compte === -->
  <div id="accountModal" class="modal hidden">
    <div class="modal-box">
      <h3>Ajouter un compte</h3>
      <label>Nom du compte</label>
      <input id="accName" type="text" placeholder="Ex: Compte courant" required>

      <label style="margin-top:8px;">Type</label>
      <select id="accType">
        <option value="Banque">Banque</option>
        <option value="Crypto">Crypto</option>
        <option value="Bourse">Bourse</option>
        <option value="Épargne">Épargne</option>
        <option value="Autre">Autre</option>
      </select>

      <label style="margin-top:8px;">Solde (€)</label>
      <input id="accBalance" type="number" step="0.01" placeholder="0,00" required>

      <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:12px;">
        <button id="cancelModal" class="btn btn-ghost">Annuler</button>
        <button id="confirmModal" class="btn btn-primary">Enregistrer</button>
      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <p>© 2025 ValenHub — Clarté & Sérénité financière.</p>
    </div>
  </footer>

  <script src="assets/app.js" defer></script>
  <script src="assets/dashboard.js?v=7002" defer></script>
</body>
</html>
